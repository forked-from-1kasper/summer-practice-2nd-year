\documentclass{article}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}

\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[russian]{babel}
\usepackage[tmargin=1in,bmargin=1in,lmargin=1.25in,rmargin=1.25in]{geometry}

\newtheorem{theorem}{Теорема}
\newtheorem*{theorem*}{Теорема}
\newtheorem{consequence}{Следствие}
\newtheorem*{consequence*}{Следствие}
\newtheorem{proposition}{Утверждение}
\newtheorem*{proposition*}{Утверждение}
\newtheorem{lemma}{Лемма}
\newtheorem*{lemma*}{Лемма}

\begin{document}

\begin{titlepage}
  \centering
  Федеральное государственное автономное\par
  образовательное учреждение\par
  высшего образования\par
  {\scshape «Сибирский федеральный университет»\par}

  \vspace{0.3cm}
  Институт математики и фундаментальной информатики СФУ\par
  {\small Кафедра математического анализа и дифференциальных уравнений\par}

  \vspace{0.5cm}
  \begin{flushright}
    \begin{tabular}{l@{}}
      {\scshape Утверждаю}\\
      Заведующий кафедрой\\
      $\underset{\text{подпись}}{\underline{\hspace{1.3cm}}}$
      $\underset{\text{фамилия, инициалы}}{\text{Фроленков И. В.}}$\\
      «\underline{\hspace{1.2cm}}» \underline{\hspace{1.2cm}} 20\underline{\hspace{0.4cm}} г.
    \end{tabular}
  \end{flushright}

  \vspace{2cm}
  {\Large\bf Отчёт о практике\par
    по получению профессиональных умений\par
    и опыта профессиональной деятельности\par}

  \vspace{0.5cm}
  Место прохождения практики:\par
  Институт математики и фундаментальной информатики\par

  \vspace{0.5cm}
  Тема практики:\par
  {\bf Последовательность с произвольно заданным\par
       замкнутым множеством предельных точек\par}

  \vspace{1.5cm}
  \begin{tabular}{l}
    Руководитель:
      $\underset{\text{подпись, дата}}{\underline{\hspace{2.2cm}}}$
      $\underset{\text{должность, учёная степень}}{\underline{\hspace{4.6cm}}}$
      $\underset{\text{фамилия, инициалы}}{\underline{\hspace{3.4cm}}}$
    \vspace{0.3cm} \\
    Студент:
      $\underset{\text{номер группы}}{\underline{\hspace{2.2cm}}}$
      $\underset{\text{номер зачётной книжки}}{\underline{\hspace{3.4cm}}}$
      $\underset{\text{подпись, дата}}{\underline{\hspace{2.2cm}}}$
      $\underset{\text{фамилия, инициалы}}{\underline{\hspace{3.4cm}}}$
  \end{tabular}

  \vfill
  Красноярск, 2022

\end{titlepage}

\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\card}{\mathrm{card}}
\newcommand{\Int}{\mathrm{Int}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\Lim}{\mathrm{Lim}}
\newcommand{\I}{\mathrm{I}}
\newcommand{\D}{\mathrm{D}}
\newcommand{\limit}{\underset{n \rightarrow + \infty}{\lim}}

\section{Основные определения}

Будем работать в произвольной достаточно общей теории множеств с аксимой выбора.
Определим $\R$ как некоторое непрерывное линейно упорядоченное поле, без доказательств
ссылаясь на утверждения о том, что такое поле единственно с точностью до изоморфизма и существует.

Всюду будем использовать стандартные логические и теоретико-можественные обозначения ($\forall$, $\exists$, $\land$, $\lor$, $\Rightarrow$, $\Leftrightarrow$, $\cup$, $\cap$, $\setminus$, $\varnothing$ и так далее) и,
также стандартно, $f \circ g$ для композиции функций (то есть для функции $x \mapsto f(g(x))$), $f(A)$ для образа (множества $\{ f(x)\ |\ x \in A \}$),
$f^{-1}(B)$ для прообраза (множества $\{ x\ |\ f(x) \in B \}$) и $\card(X)$ для мощности множества.

Множество {\bf счётно,} если его мощность не превышает мощность множества натуральных чисел $\N$.
Сопоставим каждому счётному множеству $A$ некоторую биекцию его с $\N$ и обозначим её $\kappa_A : \N \rightarrow A$.

Точку $x$ множества $A \subseteq \R$ назовём {\bf предельной,} если в любой окрестности этой точки
существует хотя бы одна точка из $A$, не совпадающая с $x$. Множество всех предельных точек обозначим как $\Lim(A)$.

Объединение множества $A$ со множеством всех его предельных точек называется {\bf замыканием} и обозначается $\overline{A}$.

Множество назовём {\bf замкнутым,} если оно содержит все свои предельные точки.

Если даны подмножества $A \subseteq B \subseteq \R$ такие, что $\overline{A} = B$, то говорят, что множество $A$ {\bf плотно в} $B$.

{\bf Числовой последовательностью} назовём всякую функцию $f : \N \rightarrow \R$.

Будем говорить, что число $A \in \R$ является {\bf пределом последовательности} $f$, если выполняется
\begin{equation*}
  \forall \varepsilon > 0: \exists N \in \N: \forall n \geq N : |f(n) - A| \leq \varepsilon
\end{equation*}

В этом случае пишут $\limit f(n) = A$.

Последовательность, у которой существует предел, назовём {\bf сходящейся.}

Если $g : \N \rightarrow \N$ — строго возрастающая последовательность, то есть для неё выполняется
\begin{equation*}
  \forall n, m: n < m \Rightarrow g(n) < g(m),
\end{equation*}

то последовательность $f \circ g$ называется {\bf подпоследовательностью} последовательности $f$.

{\bf Предельной точкой последовательности} называется предел любой её подпоследовательности, если таковой существует.
По аналогии со множествами, множество предельных точек последовательности $f$ обозначим как $\Lim(f)$.

Обратите внимание на то, что, в общем случае, $\Lim(f) \neq \Lim(f(\N))$ (например, если $f = (n \mapsto c)$ для некоторой константы $c \in \R$).

\section{Некоторые вспомогательные утверждения}

Приведём без доказательства несколько известных утверждений.

\begin{proposition*}
  $\Q$ счётно.
\end{proposition*}

\begin{proposition*}
  Декартово произведение счётных множеств счётно.
\end{proposition*}

\begin{proposition*}
  Образ счётного множества не более чем счётен.
\end{proposition*}

\begin{proposition*}
  $\Q$ плотно в $\R$.
\end{proposition*}

\begin{theorem}
  \label{subsequence-limit}
  Если последовательность сходится, то все её подпоследовательности сходятся к тому же пределу.
\end{theorem}

\begin{proof}
  Пусть выполнено $\forall \varepsilon > 0: \exists N_\varepsilon \in \N: \forall n \geq N : |f(n) - A| \leq \varepsilon$.
  Зафиксируем некоторую подпоследовательность $f \circ g$ и $\varepsilon > 0$.

  Пусть $M_\varepsilon = \mathrm{min} \{ m \in \N \ |\ g(m) \geq N_\varepsilon \}$ (оно существует в силу того, что $g$ строго возрастает).
  Тогда для всех $n \geq M_\varepsilon$ выполняется $g(n) \geq g(M_\varepsilon) \geq N_\varepsilon$, следовательно $|f(g(n)) - A| \leq \varepsilon$.
\end{proof}

\begin{theorem}
  \label{clos-of-finite-set}

  Если $A \subseteq \R$ конечно, то $\overline{A} = A$.
\end{theorem}

\begin{proof}
  блаблабла
\end{proof}

\begin{theorem*}
  Во всяком $A \subseteq \R$ можно выделить не более чем счётное плотное подмножество.
\end{theorem*}

\begin{proof}
  Обозначим $B(x, r) = \{ y \in \R \ |\ |x - y| < r \}$.

  Рассмотрим множество $\Delta = \{ (q, r)\ |\ q, r \in \Q \land B(q, r) \cap A \neq \varnothing \}$.
  Заметим, что оно не более чем счётно, поскольку является подмножеством $\Q \times \Q$.

  Для каждой пары $(q, r) \in \Delta$ выберем некоторый элемент $\sigma(q, r) \in B(q, r) \cap A$.

  Обозначим $\D(A) = \sigma(\Delta) \subseteq A$. Поскольку $\Delta$ либо конечно, либо счётно, то $\D(A)$ не более чем счётно
  как образ конечного или счётного множества.

  Докажем сначала, что $\Lim(\D(A)) \subseteq A$. Пусть $r \in \Lim(\D(A))$. ???

  Итак, поскольку $\D(A) \subseteq A$, имеем $\overline{\D(A)} = \D(A) \cup \Lim(\D(A)) \subseteq A$.

  Докажем, что $A \subseteq \overline{\D(A)}$. Пусть $c \in A$. Если $c \in \D(A)$, то утверждение, очевидно, выполнено;
  поэтому считаем, что $c \notin \D(A)$, и докажем $c \in \Lim(\D(A))$.

  Возьмём произвольное $\varepsilon > 0$. Поскольку $\Q$ плотно в $\R$, существует $q \in \Q$ ($c \neq q$) такое, что $|c - q| < \varepsilon/3$.
  В силу аксоимы Архимеда существует $r \in \Q$ такое, что $\varepsilon/3 < r < 2\varepsilon/3$.
  Следовательно, $|c - q| < \varepsilon/3 < r$, то есть $c \in B(q, r)$ и $(q, r) \in \Delta$, потому определено $\sigma(q, r)$.

  Так как $\sigma(q, r) \in B(q, r)$, то $|\sigma(q, r) - q| < r < 2\varepsilon/3$.
  Соединяя, получаем: $|c - \sigma(q, r)| = |c - q + q - \sigma(q, r)| \leq |c - q| + |\sigma(q, r) - q| < \varepsilon/3 + 2\varepsilon/3 = \varepsilon$.

  Поскольку $\sigma(q, r) \in \D(A)$ и $c \notin \D(A)$, выполнено $c \neq \sigma(q, r)$, что и требовалось.
\end{proof}

\begin{lemma}
  \label{D-infinity}
  Если $A$ бесконечно, то $\D(A)$ также бесконечно.
\end{lemma}

\begin{proof}
  Действительно, если $\D(A)$ конечно, то в силу теоремы \ref{clos-of-finite-set} имеем $\overline{\D(A)} = \D(A)$,
  но, с другой стороны, $\overline{\D(A)} = A$. Соединяя, $\D(A) = A$, то есть $A$ конечно.

  Контрапозицией получаем необходимое утверждение.
\end{proof}

\begin{theorem}
  \label{lim-f-subset-clos-A}
  Для любой $f : \N \rightarrow A$ верно $\Lim(f) \subseteq \overline{A}$.
\end{theorem}

\begin{proof}
  блаблабла
\end{proof}

\begin{theorem*}
  Множество всех предельных точек последовательности замкнуто.
\end{theorem*}

\begin{proof}
  блаблабла
\end{proof}

Из последнего утверждения следует, что множеством предельных точек последовательности не может быть произвольное множество.
Однако мы докажем, что таким множеством может быть произвольное {\it замкнутое} множество.

\section{Некоторые вспомогательные конструкции}

Обозначим $\id = (n \mapsto n)$.

\begin{theorem}
  \label{lim-idfun-eq-empty}
  $ \Lim(\id) = \varnothing $
\end{theorem}

\begin{proof}
  блаблабла
\end{proof}

Пусть даны $m$ различных вещественных чисел $a_0, a_1, ..., a_m$. Обозначим
\begin{equation*}
  \omega(a_0, a_1, ..., a_m) = \left( n \mapsto a_{n\ \mathrm{mod}\ (m + 1)} \right)
\end{equation*}

\begin{theorem}
  \label{lim-omega-eq-ai}
  $ \Lim(\omega(a_0, a_1, ..., a_m)) = \{ a_0, a_1, ..., a_m \} $
\end{theorem}

\begin{proof}
Из теорем \ref{clos-of-finite-set} и \ref{lim-f-subset-clos-A} следует, что
\begin{equation*}
  \Lim(\omega(a_0, a_1, ..., a_m)) \subseteq \overline{\{ a_0, a_1, ..., a_m \}} = \{ a_0, a_1, ..., a_m \}
\end{equation*}

Докажем $ \{ a_0, a_1, ..., a_m \} \subseteq \Lim(\omega(a_0, a_1, ..., a_m)) $.
Возьмём некоторое $a_i$, тогда
\begin{equation*}
  \limit \omega(n(m + 1) + i) = \limit a_i = a_i
\end{equation*}
Следовательно, $\omega \circ (n \mapsto n(m + 1) + i)$ — искомая подпоследовательность.
\end{proof}

Обозначим последовательность $\{0, 0, 1, 0, 1, 2, ..., 0, 1, ..., n, 0, 1, ..., n, n + 1, ...\}$ как $\phi : \N \rightarrow \N$.

Заметим, что если $j \leq i$, то
\begin{equation*}
  \phi \left( j + \frac{i(i + 1)}{2} \right) = \phi(0 + 1 + 2 + ... + i + j) = j
\end{equation*}

\begin{theorem}
  \label{kappa-comp-phi-eq-A}
  Пусть $A \subseteq \R$ — некоторое счётное множество. Тогда $\Lim(\kappa_A \circ \phi) = \overline{A} $
\end{theorem}

\begin{proof}
Поскольку $\kappa_A(\phi(n)) \in A$, из теоремы \ref{lim-f-subset-clos-A} получаем, что $\Lim(\kappa_A \circ \phi) \subseteq \overline{A}$.

Обратно, пусть $r \in \overline{A} = A \cup \Lim(A)$.

Если $r \in A$, обозначим $k = \kappa_A^{-1}(r)$. Тогда:
\begin{align*}
   \ & \kappa_A \circ \phi \circ (n \mapsto k + (n + k)(n + k + 1)/2) \\
  =\ & (n \mapsto \kappa_A(\phi(k + (n + k)(n + k + 1)/2))) \\
  =\ & (n \mapsto \kappa_A(k))\ (\text{поскольку } k \leq n + k) \\
  =\ & (n \mapsto \kappa_A(\kappa_A^{-1}(r))) \\
  =\ & (n \mapsto r)
\end{align*}
Получили постоянную последовательность с пределом $r$.

Пусть $r \in \Lim(A)$. Тогда существует последовательность $g : \N \rightarrow A$, сходящаяся к $r$.
Обозначим $k_n = \kappa_A^{-1}(g(n))$ и $k^\prime_n = k_0 + k_1 + ... + k_n$. Заметим, что $k^\prime_n \geq k_n$.

Если $k_n = 0$ для бесконечного числа номеров $n$, то существует строго возрастающая $f : \N \rightarrow \N$
такая, что $k_{f(n)} = 0$. Но тогда $g(f(n)) = \kappa_A(k_{f(n)}) = \kappa_A(0)$.
Из теоремы \ref{subsequence-limit} следует, что $r = \kappa_A(0) \in A$, но этот случай сводится к предыдущему.

Пусть теперь $k_n = 0$ лишь для конечного числа номером. Возьмём наибольший такой номер $k$ и обозначим $g^\prime = g \circ (n \mapsto n + k + 1)$.
Снова из теоремы \ref{subsequence-limit} получаем, что $\limit g^\prime(n) = \limit g(n) = r$.

Пусть также $h = (n \mapsto k_n + k^\prime_n(k^\prime_n + 1)/2) \circ (n \mapsto n + k + 1)$. Докажем сначала, что $h$ строго монотонна.

Действительно, пусть $i = n + k + 1$ для некоторого индекса $n$. Тогда, по заданию $k$, $k_i > 0$ и $k_{i + 1} > 0$. Следовательно:
\begin{align*}
   \ & h(n + 1) \\
  =\ & k_{i + 1} + k^\prime_{i + 1}(k^\prime_{i + 1} + 1)/2 \\
  =\ & k_{i + 1} + (k^\prime_i + k_{i + 1})(k^\prime_i + k_{i + 1} + 1)/2 \\
  =\ & k_{i + 1} + ((k^\prime_i)^2 + 2k^\prime_ik_{i + 1} + k^2_{i + 1} + k^\prime_i + k_{i + 1})/2 \\
  >\ & k_{i + 1} + ((k^\prime_i)^2 + 2k^\prime_ik_{i + 1} + k^\prime_i)/2 \\
  =\ & k_{i + 1} + k^\prime_ik_{i + 1} + ((k^\prime_i)^2 + k^\prime_i)/2 \\
  >\ & k^\prime_i + ((k^\prime_i)^2 + k^\prime_i)/2 \\
  \geq\ & k_i + ((k^\prime_i)^2 + k^\prime_i)/2 \\
  =\ & k_i + k^\prime_i(k^\prime_i + 1)/2 \\
  =\ & h(n)
\end{align*}

Итак, $\kappa_A \circ \phi \circ h$ — некоторая подпоследовательность. Далее:
\begin{align*}
   \ & \kappa_A \circ \phi \circ h \\
  =\ & \kappa_A \circ \phi \circ (n \mapsto k_n + k^\prime_n(k^\prime_n + 1)/2) \circ (n \mapsto n + k + 1) \\
  =\ & (n \mapsto \kappa_A(\phi(k_n + k^\prime_n(k^\prime_n + 1)/2))) \circ (n \mapsto n + k + 1) \\
  =\ & (n \mapsto \kappa_A(k_n)) \circ (n \mapsto n + k + 1) \\
  =\ & (n \mapsto \kappa_A(\kappa_A^{-1}(g(n)))) \circ (n \mapsto n + k + 1) \\
  =\ & (n \mapsto g(n)) \circ (n \mapsto n + k + 1) \\
  =\ & g^\prime
\end{align*}

Следовательно, $\limit \kappa_A(\phi(h(n))) = \limit g^\prime(n) = \limit g(n) = r$, что и требовалось.

\end{proof}

\section{Построение искомой последовательности}

Пусть дано некоторое замкнутое множество $A \subseteq \R$. Построим искомую последовательность $c : \N \rightarrow \R$ следующим образом:
\begin{equation*}
  c =
  \begin{cases}
    \id, & A = \varnothing, \\
    \omega(a_0, a_1, ..., a_m), & A = \{a_0, a_1, ..., a_m\}, \\
    \kappa_{\D(A)} \circ \phi, & \text{A бесконечно}.
  \end{cases}
\end{equation*}

$\kappa_{\D(A)}$ в последней строке всегда определено в силу леммы \ref{D-infinity}.

Заметим, что если $A \neq \varnothing$, то, по построению, $c(\N) \subseteq A$.

\begin{theorem*}
  $\Lim(c) = A$
\end{theorem*}

\begin{proof}
Следует из теорем \ref{lim-idfun-eq-empty}, \ref{lim-omega-eq-ai}, \ref{kappa-comp-phi-eq-A} и того, что $\D(A)$ плотно в $A$.
\end{proof}

\end{document}
